<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HopeFund -- Social Good Donations</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #0f172a; color: #e5e7eb; line-height: 1.6; }
    header { padding: 16px; text-align: center; background: #111827; }
    header h1 { margin: 0; font-size: 28px; color: #f9fafb; }
    .hero { background: url("https://img.freepik.com/premium-photo/group-indian-children-sitting-ground-reading-books_14117-1027497.jpg?w=900") center/cover no-repeat; height: 360px; display: flex; align-items: flex-end; justify-content: center; color: white; position: relative; }
    .hero::after { content: ""; position: absolute; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0) 40%, rgba(0,0,0,0.8) 100%); }
    .hero-text { position: relative; padding: 20px; text-align: center; max-width: 650px; }
    .hero-text h2 { margin-bottom: 10px; font-size: 32px; }
    .btn { display: inline-block; margin-top: 12px; padding: 12px 20px; border-radius: 6px; background: #22c55e; color: white; text-decoration: none; font-weight: bold; transition: background 0.2s ease; border: none; cursor: pointer; }
    .btn:hover { background: #16a34a; }
    section { padding: 50px 20px; max-width: 900px; margin: 0 auto; }
    section h2 { font-size: 28px; margin-bottom: 16px; color: #f9fafb; text-align: center; }
    section p { font-size: 16px; color: #d1d5db; text-align: center; }
    .impact { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-top: 30px; }
    .card { background: #1e293b; padding: 20px; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.3); }
    .card h3 { margin-bottom: 10px; font-size: 20px; color: #f9fafb; }
    .card p { font-size: 14px; color: #cbd5e1; }
    .donate { text-align: center; }
    .qr-box { margin-top: 20px; padding: 20px; border: 1px dashed #94a3b8; border-radius: 12px; display: inline-block; background: #111827; }
    .qr-box img { width: 220px; height: auto; border-radius: 8px; background: white; }
    footer { text-align: center; padding: 20px; font-size: 14px; color: #94a3b8; border-top: 1px solid #1f2937; margin-top: 40px; }
    .sticky-donate { position: fixed; bottom: 16px; left: 50%; transform: translateX(-50%); background: #22c55e; color: white; padding: 14px 24px; font-size: 16px; font-weight: bold; border-radius: 50px; box-shadow: 0 4px 12px rgba(0,0,0,0.4); text-decoration: none; z-index: 1000; transition: background 0.2s ease; }
    .sticky-donate:hover { background: #16a34a; }
    @media (min-width: 768px) { .sticky-donate { display: none; } }
    .progress-section { text-align: center; padding-top: 20px; padding-bottom: 10px; }
    .progress-bar-container { background: #2f3e58; border-radius: 9999px; height: 24px; width: 100%; max-width: 320px; margin: 20px auto 0; position: relative; overflow: hidden; }
    .progress-bar { height: 100%; width: 0%; border-radius: 9999px; background: linear-gradient(90deg, #f97316, #facc15); transition: width 0.4s ease-in-out; }
    .progress-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-weight: bold; font-size: 14px; }
    .about { padding-top: 10px; }
    .about p { font-size: 18px; }
    .donate-btn-section { padding: 10px 0; }
    #donate { padding-top: 10px; }
    .hidden { display: none; }
    .amounts { margin-top: 10px; }
    .amounts button { margin: 5px; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; background: #334155; color: #f9fafb; font-weight: bold; }
    .amounts button:hover { background: #475569; }
  </style>
</head>
<body>
  <header><h1>HopeFund</h1></header>

  <section class="hero">
    <div class="hero-text">
      <h2>Together, we can make a real difference</h2>
      <p>Every contribution supports food, education, and healthcare for vulnerable families.</p>
    </div>
  </section>
  
  <section class="progress-section">
    <h2>Donation Progress</h2>
    <div class="progress-bar-container">
      <div class="progress-bar" id="progress-bar"></div>
      <div class="progress-text" id="progress-text">0%</div>
    </div>
  </section>

  <section class="about">
    <h2>About the Cause</h2>
    <p>HopeFund is dedicated to uplifting underprivileged communities by ensuring access to nutritious meals, 
      quality education, and essential healthcare. We believe that every 
      individual deserves the opportunity to thrive, regardless of their 
      socioeconomic background. Through strategic partnerships and 
      community-led initiatives, HopeFund strives to create sustainable 
      solutions that empower individuals and families to break the cycle 
      of poverty. Our programs are designed to address the root causes of 
      inequality, fostering self-reliance and resilience within the communities 
      we serve. We are committed to transparency, accountability, and 
      measurable impact in all our endeavors, ensuring that every 
      contribution makes a meaningful difference in the lives of those we 
      support.</p>
  </section>

  <section class="help">
    <h2>How Your Donations Help</h2>
    <div class="impact">
      <div class="card"><h3>üçΩ Food Security</h3><p>Each donation provides healthy meals. Every dollar counts in our fight against hunger, ensuring families have access to nutritious food. Your contribution can make a real difference.</p></div>
      <div class="card"><h3>üìö Education</h3><p>Your contribution helps supply books and learning materials to children in need, empowering them to pursue their education and build a better future.</p></div>
      <div class="card"><h3>ü©∫ Healthcare</h3><p>Donations ensure access to essential medical services, including check-ups, vaccinations, and treatments for those who cannot afford them.</p></div>
    </div>
  </section>

  <section class="donate-btn-section" style="text-align: center;">
    <button id="donate-now-btn" class="btn">Donate Now</button>
  </section>

  <section id="donate" class="donate hidden">
    <h2>Select Donation Amount</h2>
    <div class="amounts">
      <button data-amount="100">‚Çπ100</button>
      <button data-amount="500">‚Çπ500</button>
      <button data-amount="1000">‚Çπ1000</button>
      <button data-amount="2000">‚Çπ2000</button>
    </div>
    <p id="donation-msg">Choose an amount to generate QR code.</p>
    <div class="qr-box hidden" id="qr-box">
      <img id="qr-img" src="" alt="Donation QR code" />
    </div>
  </section>

  <a href="#donate" class="sticky-donate">Donate üíö</a>

  <footer>¬© <span id="yr"></span> HopeFund</footer>

  <script>
    document.getElementById('yr').textContent = new Date().getFullYear();

    const donateBtn = document.getElementById('donate-now-btn');
    const donateSection = document.getElementById('donate');
    const qrBox = document.getElementById('qr-box');
    const qrImg = document.getElementById('qr-img');
    const donationMsg = document.getElementById('donation-msg');
    const progressBar = document.getElementById("progress-bar");
    const progressText = document.getElementById("progress-text");

    donateBtn.addEventListener('click', () => {
      donateSection.classList.remove('hidden');
      donateSection.scrollIntoView({ behavior: 'smooth' });
    });

    // Fetch progress from backend
    async function fetchProgress() {
      try {
        const res = await fetch("http://127.0.0.1:5000/progress");
        const data = await res.json();
        progressBar.style.width = data.progress + "%";
        progressText.textContent = data.progress + "% (‚Çπ" + data.total + " / ‚Çπ" + data.goal + ")";
      } catch (err) {
        console.error("Error fetching progress:", err);
      }
    }

    // Run once + refresh every 5s
    fetchProgress();
    setInterval(fetchProgress, 5000);

    // Donation amount buttons
    document.querySelectorAll(".amounts button").forEach(btn => {
      btn.addEventListener("click", () => {
        const amount = parseInt(btn.dataset.amount);
        donationMsg.textContent = "Scan the QR code below to donate ‚Çπ" + amount;

        // Construct the UPI URL with the recipient's details and the selected amount
        const upiUrl = `upi://pay?pa=7970412321@ybl&pn=SHREYASH%20SHAN&am=${amount}&cu=INR`;
        
        // URL-encode the UPI string to safely pass it as a parameter to the QR server API
        const encodedUpiUrl = encodeURIComponent(upiUrl);

        // Set the image source to the QR code generator API with the encoded UPI data
        qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodedUpiUrl}`;
        
        // Make the QR code visible
        qrBox.classList.remove("hidden");
      });
    });
  </script>
</body>
</html>